<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Timeoversikt</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.11.1/bootstrap-table.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.11.1/bootstrap-table.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.11.1/extensions/filter-control/bootstrap-table-filter-control.js"></script>
</head>
<body>
    <div class="container">
        {% include 'header.html' %}

    <span class="glyphicon glyphicon-arrow-left"></span><a href="index.php">Hovedside</a>
    <h1>Timeoversikt</h1>
    
        {% if status == "kanIkkeEndres" %}
        <div class="alert alert-danger" role="alert">
            <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
            <span class="sr-only">Error:</span>
            Timeregistreringen er deaktivert og kan ikke korrigeres
        </div>
        {% elseif status == "deaktivert" %}
        <div class="alert alert-success" role="alert">
            <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
            <span class="sr-only">Error:</span>
            Timeregistreringen ble deaktivert
        </div>
        {% elseif status == "lagret" %}
        <div class="alert alert-success" role="alert">
            <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
            <span class="sr-only">Error:</span>
            Korrigeringen er lagret i en ny timeregistrering. Den gamle er deaktivert
        </div>
        {% endif %}
        
    <form action="timekorrigering.php" method=GET>
        <table id="table" data-toggle="table" data-sort-name="date" data-sort-order="asc" data-search="true" data-show-columns="true" data-id-field="id" data-show-pagination-switch="true" data-filter-control="true" data-filter-show-clear="true">
            <thead>
                <tr>
                    <th></th>
                    <th data-field="date" data-sortable="true" data-sort-name="_date_data" data-sorter="dateSorter">Dato</th>
                    <!--<th data-field="date" data-sortable="true">Dato</th>-->
                    <th data-field="from">Fra</th>
                    <th data-field="to">Til</th>
                    <th data-field="hours" data-sortable="true">Timer</th>
                    <th data-field="task" data-sortable="true">Oppgave</th>
                    <th data-field="oppgavetype" data-sortable="true" data-filter-control="select">Oppgavetype</th>
                    <th data-field="godkjent" data-sortable="true">Godkjent</th>
                    <th data-field="kommentar">Kommentar</th>
                </tr>
            </thead>
            <tbody>
                {% for timereg in timeregistreringer %}
                <tr>
                    <td>{% if timereg.getAktiv() == 0 %}<font color=grey><i> {% endif %} <input type=radio name="timeregId" value={{ timereg.getTimeregId() }}/>{% if timereg.getAktiv() == 0%} </i></font> {% endif %}</td>
                    <td data-datoklokkeslett="{{ timereg.getDato() }} {{ timereg.getFra() }}">{% if timereg.getAktiv() == 0 %}<font color=grey><i> {% endif %} {{ timereg.getDato() }} {% if timereg.getAktiv() == 0%} </i></font> {% endif %}</td>
                    <td>{% if timereg.getAktiv() == 0 %}<font color=grey><i> {% endif %} {{ timereg.getFra() }} {% if timereg.getAktiv() == 0%} </i></font> {% endif %}</td>
                    <td>{% if timereg.getAktiv() == 0 %}<font color=grey><i> {% endif %} {{ timereg.getTil() }} {% if timereg.getAktiv() == 0%} </i></font> {% endif %}</td>
                    <td>{% if timereg.getAktiv() == 0 %}<font color=grey><i> {% endif %} {{ timereg.getHours() }} {% if timereg.getAktiv() == 0%} </i></font> {% endif %}</td>
                    <td>{% if timereg.getAktiv() == 0 %}<font color=grey><i> {% endif %} {{ oppgavereg.hentOppgave(timereg.getOppgaveId()).getOppgaveNavn() }} {% if timereg.getAktiv() == 0%} </i></font> {% endif %}</td>
                    <td>{% if timereg.getAktiv() == 0 %}<font color=grey><i> {% endif %} {{ oppgavereg.getOppgavetype(oppgavereg.hentOppgave(timereg.getOppgaveId()).getOppgavetype()).getNavn() }} {% if timereg.getAktiv() == 0%} </i></font> {% endif %}</td>
                    <td>{% if timereg.getAktiv() == 0 %}<font color=grey><i> {% endif %} {{ timereg.getGodkjentTekst() }} {% if timereg.getAktiv() == 0%} </i></font> {% endif %}</td>
                    <td>{% if timereg.getAktiv() == 0 %}<font color=grey><i> {% endif %} {{ timereg.getKommentar() }} {% if timereg.getAktiv() == 0%} </i></font> {% endif %}</td>
                </tr>
                {% endfor %}
            </tbody>

        </table>
        <input class="btn-primary" type="submit" name=action value="Korriger">
        <input class="btn-primary" type="submit" name=action value="Deaktiver">
        
    </form>
    <a href="index.php">Tilbake</a>
    </div>
    <script type="text/javascript">
        //<!--
        function dateSorter(a, b) {
            if (a.datoklokkeslett < b.datoklokkeslett) return -1;
            if (a.datoklokkeslett > b.datoklokkeslett) return 1;
            return 0;
        }
        //-->
    </script>
</body>
</html>